<%= turbo_frame_tag "notes_page_#{page}" do %>
  <div class="space-y-4">
    <% notes.each do |note| %>
      <div class="border border-gray-200 rounded-lg p-4">
        <p class="text-sm text-gray-500 mb-1"><%= note.created_at.strftime("%b %d, %Y") %></p>
        <p class="mb-2"><%= note.body.truncate(200) %></p>
        <span class="inline-block text-xs px-2 py-0.5 rounded-full
          <% if note.helpful? %>bg-green-100 text-green-800
          <% elsif note.not_helpful? %>bg-red-100 text-red-800
          <% else %>bg-gray-100 text-gray-600<% end %>">
          <%= note.status.humanize %>
        </span>
      </div>
    <% end %>
  </div>
  <% if notes.size == 20 %>
    <%= turbo_frame_tag "notes_page_#{page + 1}", src: profile_notes_path(user.twitter_handle, page: page + 1), loading: :lazy do %>
      <p class="text-center text-gray-400 py-4">Loading more notes...</p>
    <% end %>
  <% end %>
<% end %>
