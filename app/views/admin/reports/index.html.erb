<div class="max-w-7xl mx-auto px-6 py-12">
  <a href="/admin" class="text-blue-600 hover:underline text-sm">&larr; Back to Dashboard</a>
  <h1 class="text-2xl font-bold mt-4 mb-8">Reports</h1>

  <% if @reports.any? %>
    <div class="space-y-6">
      <% @reports.each do |report| %>
        <div class="border border-gray-200 rounded-lg p-5">
          <div class="flex items-start justify-between mb-3">
            <div class="flex items-center gap-4 text-sm">
              <span class="text-gray-500">Reported by <span class="font-medium text-gray-700">@<%= report.user.twitter_handle %></span></span>
              <span class="text-gray-300">&middot;</span>
              <span class="text-gray-500"><%= report.created_at.strftime("%b %d, %Y") %></span>
              <span class="text-gray-300">&middot;</span>
              <span class="inline-block px-2 py-0.5 text-xs font-medium rounded-full bg-orange-100 text-orange-800"><%= report.reason %></span>
              <span class="text-gray-400 text-xs">(<%= report.note.reports_count %> total reports)</span>
            </div>
            <div class="flex gap-2">
              <%= form_with url: admin_report_path(report), method: :patch, local: true, class: "inline" do %>
                <input type="hidden" name="action_taken" value="dismiss">
                <button type="submit" class="text-xs px-3 py-1.5 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 font-medium">Dismiss</button>
              <% end %>
              <%= form_with url: admin_report_path(report), method: :patch, local: true, class: "inline" do %>
                <input type="hidden" name="action_taken" value="remove">
                <button type="submit" class="text-xs px-3 py-1.5 rounded bg-red-100 text-red-700 hover:bg-red-200 font-medium">Remove Note</button>
              <% end %>
            </div>
          </div>

          <div class="bg-gray-50 rounded-md p-4 mb-3">
            <div class="flex items-center gap-2 mb-2">
              <span class="text-xs font-medium text-gray-500">Note by</span>
              <span class="text-sm font-medium">@<%= report.note.author.twitter_handle %></span>
            </div>
            <p class="text-sm text-gray-800 whitespace-pre-wrap"><%= report.note.body %></p>
          </div>

          <% if report.note.selected_text.present? %>
            <div class="mb-3">
              <span class="text-xs font-medium text-gray-500">Selected text on page:</span>
              <p class="text-sm text-gray-600 italic mt-1">&ldquo;<%= report.note.selected_text %>&rdquo;</p>
            </div>
          <% end %>

          <div>
            <span class="text-xs font-medium text-gray-500">Source page:</span>
            <a href="<%= report.note.page.url %>" target="_blank" rel="noopener" class="text-sm text-blue-600 hover:underline ml-1"><%= report.note.page.url %></a>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-gray-500">No reports to review.</p>
  <% end %>
</div>
